# Generated by Django 5.1.6 on 2025-06-24 04:46

import django.core.validators
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('app_eval', '0003_alter_evaluationassignment_evaluator'),
        ('dynamic_form', '0004_alter_formsubmission_applicationdocument_and_more'),
        ('tech_eval', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.DeleteModel(
            name='EvaluationCriteria',
        ),
        migrations.RenameField(
            model_name='evaluationauditlog',
            old_name='new_value',
            new_name='metadata',
        ),
        migrations.RemoveField(
            model_name='evaluationauditlog',
            name='previous_value',
        ),
        migrations.AddField(
            model_name='criteriaevaluation',
            name='cached_percentage',
            field=models.FloatField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='criteriaevaluation',
            name='cached_weighted_score',
            field=models.FloatField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='evaluatorassignment',
            name='cached_criteria_count',
            field=models.IntegerField(default=0),
        ),
        migrations.AddField(
            model_name='evaluatorassignment',
            name='cached_criteria_data',
            field=models.JSONField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='evaluatorassignment',
            name='cached_max_marks',
            field=models.FloatField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='evaluatorassignment',
            name='cached_percentage_score',
            field=models.FloatField(blank=True, db_index=True, null=True),
        ),
        migrations.AddField(
            model_name='evaluatorassignment',
            name='cached_raw_marks',
            field=models.FloatField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='technicalevaluationround',
            name='cache_updated_at',
            field=models.DateTimeField(auto_now=True),
        ),
        migrations.AddField(
            model_name='technicalevaluationround',
            name='cached_assigned_count',
            field=models.IntegerField(db_index=True, default=0),
        ),
        migrations.AddField(
            model_name='technicalevaluationround',
            name='cached_average_percentage',
            field=models.FloatField(blank=True, db_index=True, null=True),
        ),
        migrations.AddField(
            model_name='technicalevaluationround',
            name='cached_completed_count',
            field=models.IntegerField(db_index=True, default=0),
        ),
        migrations.AddField(
            model_name='technicalevaluationround',
            name='cached_evaluator_data',
            field=models.JSONField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='technicalevaluationround',
            name='cached_marks_summary',
            field=models.JSONField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='technicalevaluationround',
            name='cached_proposal_data',
            field=models.JSONField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='trlanalysis',
            name='cached_analysis_summary',
            field=models.JSONField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='criteriaevaluation',
            name='evaluated_at',
            field=models.DateTimeField(auto_now_add=True, db_index=True),
        ),
        migrations.AlterField(
            model_name='evaluationauditlog',
            name='action',
            field=models.CharField(choices=[('created', 'Created'), ('updated', 'Updated'), ('completed', 'Completed'), ('assigned', 'Assigned'), ('decision_made', 'Decision Made'), ('cache_updated', 'Cache Updated')], db_index=True, max_length=20),
        ),
        migrations.AlterField(
            model_name='evaluationauditlog',
            name='created_at',
            field=models.DateTimeField(auto_now_add=True, db_index=True),
        ),
        migrations.AlterField(
            model_name='evaluatorassignment',
            name='assigned_at',
            field=models.DateTimeField(auto_now_add=True, db_index=True),
        ),
        migrations.AlterField(
            model_name='evaluatorassignment',
            name='conflict_of_interest',
            field=models.BooleanField(db_index=True, default=False, help_text='Does the evaluator have a conflict of interest?'),
        ),
        migrations.AlterField(
            model_name='evaluatorassignment',
            name='conflict_remarks',
            field=models.TextField(blank=True, help_text='Details about the conflict of interest'),
        ),
        migrations.AlterField(
            model_name='evaluatorassignment',
            name='is_completed',
            field=models.BooleanField(db_index=True, default=False),
        ),
        migrations.AlterField(
            model_name='evaluatorassignment',
            name='overall_comments',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='technicalevaluationround',
            name='assignment_status',
            field=models.CharField(choices=[('pending', 'Pending Assignment'), ('assigned', 'Assigned'), ('completed', 'Completed')], db_index=True, default='pending', max_length=20),
        ),
        migrations.AlterField(
            model_name='technicalevaluationround',
            name='created_at',
            field=models.DateTimeField(auto_now_add=True, db_index=True),
        ),
        migrations.AlterField(
            model_name='technicalevaluationround',
            name='overall_decision',
            field=models.CharField(choices=[('recommended', 'Recommended'), ('not_recommended', 'Not Recommended'), ('pending', 'Pending')], db_index=True, default='pending', max_length=20),
        ),
        migrations.AlterField(
            model_name='trlanalysis',
            name='analysis_notes',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='trlanalysis',
            name='consensus_current_trl',
            field=models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(9)]),
        ),
        migrations.AlterField(
            model_name='trlanalysis',
            name='consensus_expected_trl',
            field=models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(9)]),
        ),
        migrations.AlterField(
            model_name='trlanalysis',
            name='created_at',
            field=models.DateTimeField(auto_now_add=True, db_index=True),
        ),
        migrations.AlterField(
            model_name='trlanalysis',
            name='trl_consensus_level',
            field=models.CharField(blank=True, choices=[('high', 'High Consensus'), ('medium', 'Medium Consensus'), ('low', 'Low Consensus')], db_index=True, max_length=10, null=True),
        ),
        migrations.AlterField(
            model_name='trlanalysis',
            name='trl_variance',
            field=models.FloatField(blank=True, null=True),
        ),
        migrations.AddIndex(
            model_name='criteriaevaluation',
            index=models.Index(fields=['evaluator_assignment', 'evaluation_criteria'], name='tech_eval_c_evaluat_744cfe_idx'),
        ),
        migrations.AddIndex(
            model_name='criteriaevaluation',
            index=models.Index(fields=['evaluation_criteria', '-evaluated_at'], name='tech_eval_c_evaluat_7b2802_idx'),
        ),
        migrations.AddIndex(
            model_name='evaluationauditlog',
            index=models.Index(fields=['evaluation_round', '-created_at'], name='tech_eval_e_evaluat_ab1436_idx'),
        ),
        migrations.AddIndex(
            model_name='evaluationauditlog',
            index=models.Index(fields=['action', '-created_at'], name='tech_eval_e_action_7e20ce_idx'),
        ),
        migrations.AddIndex(
            model_name='evaluationauditlog',
            index=models.Index(fields=['user', '-created_at'], name='tech_eval_e_user_id_af4f3f_idx'),
        ),
        migrations.AddIndex(
            model_name='evaluatorassignment',
            index=models.Index(fields=['evaluation_round', 'is_completed'], name='tech_eval_e_evaluat_7796a5_idx'),
        ),
        migrations.AddIndex(
            model_name='evaluatorassignment',
            index=models.Index(fields=['evaluator', 'is_completed'], name='tech_eval_e_evaluat_b3040b_idx'),
        ),
        migrations.AddIndex(
            model_name='evaluatorassignment',
            index=models.Index(fields=['is_completed', '-assigned_at'], name='tech_eval_e_is_comp_001fd7_idx'),
        ),
        migrations.AddIndex(
            model_name='evaluatorassignment',
            index=models.Index(fields=['conflict_of_interest', 'is_completed'], name='tech_eval_e_conflic_e761ce_idx'),
        ),
        migrations.AddIndex(
            model_name='evaluatorassignment',
            index=models.Index(fields=['cached_percentage_score'], name='tech_eval_e_cached__a6a7b1_idx'),
        ),
        migrations.AddIndex(
            model_name='technicalevaluationround',
            index=models.Index(fields=['assignment_status', '-created_at'], name='tech_eval_t_assignm_d2c98a_idx'),
        ),
        migrations.AddIndex(
            model_name='technicalevaluationround',
            index=models.Index(fields=['overall_decision', '-created_at'], name='tech_eval_t_overall_8da025_idx'),
        ),
        migrations.AddIndex(
            model_name='technicalevaluationround',
            index=models.Index(fields=['proposal', 'assignment_status'], name='tech_eval_t_proposa_b45c8d_idx'),
        ),
        migrations.AddIndex(
            model_name='technicalevaluationround',
            index=models.Index(fields=['cached_assigned_count', 'cached_completed_count'], name='tech_eval_t_cached__e10a09_idx'),
        ),
        migrations.AddIndex(
            model_name='technicalevaluationround',
            index=models.Index(fields=['cached_average_percentage'], name='tech_eval_t_cached__e00185_idx'),
        ),
        migrations.AddIndex(
            model_name='trlanalysis',
            index=models.Index(fields=['trl_consensus_level', '-created_at'], name='tech_eval_t_trl_con_ba9930_idx'),
        ),
        migrations.AddIndex(
            model_name='trlanalysis',
            index=models.Index(fields=['consensus_expected_trl'], name='tech_eval_t_consens_9ad84c_idx'),
        ),
    ]
